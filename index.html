<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Tarefas Genivaldo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- BotÃµes de Acessibilidade -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Alternar Tema" aria-label="Alternar tema">
        <span class="theme-icon" id="themeIcon">ğŸŒ™</span>
    </button>

    <button class="contrast-toggle" onclick="toggleContrast()" title="Alto Contraste" aria-label="Alto contraste">
        <span>â—</span>
    </button>

    <div class="container">
        <!-- Ãrea de Login/Cadastro -->
        <div class="wrapper" id="authWrapper">
            <div class="card-switch">
                <label class="switch">
                    <input type="checkbox" class="toggle" id="formToggle">
                    <span class="slider"></span>
                    <span class="card-side"></span>
                    
                    <div class="flip-card__inner">
                        <!-- LOGIN -->
                        <div class="flip-card__front">
                            <div class="title">ğŸ” Entrar</div>
                            <form class="flip-card__form" onsubmit="handleLogin(event)">
                                
                                <div class="form-field">
                                    <input 
                                        class="flip-card__input" 
                                        id="loginEmail" 
                                        placeholder="seu@email.com" 
                                        type="email" 
                                        required
                                        autocomplete="email"
                                        oninput="validateEmailRealTime(this, 'loginEmailIcon', 'loginEmailHint')">
                                    <span class="validation-icon" id="loginEmailIcon"></span>
                                </div>
                                <span class="input-hint" id="loginEmailHint"></span>

                                <div class="form-field form-field-password">
                                    <input 
                                        class="flip-card__input" 
                                        id="loginPassword" 
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                                        type="password" 
                                        required
                                        autocomplete="current-password"
                                        minlength="6">
                                    <button 
                                        type="button" 
                                        class="eye-btn" 
                                        onclick="togglePasswordVisibility('loginPassword', this)" 
                                        aria-label="Mostrar senha"
                                        tabindex="-1">
                                        ğŸ‘ï¸
                                    </button>
                                </div>

                                <button class="flip-card__btn" type="submit">Vamos lÃ¡! ğŸš€</button>
                            </form>
                        </div>

                        <!-- CADASTRO (SEM TELEFONE) -->
                        <div class="flip-card__back">
                            <div class="title">ğŸ“ Cadastrar</div>
                            <form class="flip-card__form" onsubmit="handleCadastro(event)">
                                
                                <!-- Nome Completo -->
                                <div class="form-field">
                                    <input 
                                        class="flip-card__input" 
                                        id="cadastroNome" 
                                        placeholder="Nome Completo" 
                                        type="text" 
                                        required
                                        autocomplete="name">
                                </div>

                                <!-- E-mail -->
                                <div class="form-field">
                                    <input 
                                        class="flip-card__input" 
                                        id="cadastroEmail" 
                                        placeholder="seu@email.com" 
                                        type="email" 
                                        required
                                        autocomplete="email"
                                        oninput="validateEmailRealTime(this, 'cadastroEmailIcon', 'cadastroEmailHint')">
                                    <span class="validation-icon" id="cadastroEmailIcon"></span>
                                </div>
                                <span class="input-hint" id="cadastroEmailHint"></span>

                                <!-- Senha -->
                                <div class="form-field form-field-password">
                                    <input 
                                        class="flip-card__input" 
                                        id="cadastroPassword" 
                                        placeholder="Senha Segura" 
                                        type="password" 
                                        required
                                        autocomplete="new-password"
                                        minlength="6"
                                        oninput="validatePasswordStrength(this)">
                                    <button 
                                        type="button" 
                                        class="eye-btn" 
                                        onclick="togglePasswordVisibility('cadastroPassword', this)" 
                                        aria-label="Mostrar senha"
                                        tabindex="-1">
                                        ğŸ‘ï¸
                                    </button>
                                </div>
                                <div class="password-strength" id="passwordStrength"></div>

                                <!-- Confirmar Senha -->
                                <div class="form-field form-field-password">
                                    <input 
                                        class="flip-card__input" 
                                        id="cadastroConfirmPassword" 
                                        placeholder="Confirmar Senha" 
                                        type="password" 
                                        required
                                        autocomplete="new-password"
                                        minlength="6"
                                        oninput="validatePasswordMatch()">
                                    <button 
                                        type="button" 
                                        class="eye-btn" 
                                        onclick="togglePasswordVisibility('cadastroConfirmPassword', this)" 
                                        aria-label="Mostrar senha"
                                        tabindex="-1">
                                        ğŸ‘ï¸
                                    </button>
                                </div>
                                <span class="input-hint" id="passwordMatchHint"></span>

                                <button class="flip-card__btn" type="submit">Confirmar! âœ…</button>
                            </form>
                        </div>
                    </div>
                </label>
            </div>   
        </div>

        <!-- DASHBOARD -->
        <div class="dashboard hidden" id="dashboard">
            <div class="dashboard-header">
                <h2>ğŸ“‹ Gerenciamento de Tarefas Genivaldo</h2>
                <button onclick="handleLogout()" class="btn-logout">Sair ğŸšª</button>
            </div>

            <div class="user-info">
                <div class="profile-section">
                    <img src="Givanildo.jpg" alt="Foto de Perfil" class="perfil-img">
                    <div class="user-details">
                        <div class="user-name">
                            <strong>ğŸ‘¤ UsuÃ¡rio:</strong> <span id="userName"></span>
                        </div>
                        <div class="user-email">
                            <strong>ğŸ“§ E-mail:</strong> <span id="userEmail"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-info">
                    <span class="progress-label">ğŸ“Š Progresso das Tarefas</span>
                    <span class="progress-stats" id="progressStats">0/0 concluÃ­das</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('tarefas')">ğŸ“ Tarefas</button>
                <button class="tab" onclick="switchTab('categorias')">ğŸ·ï¸ Categorias</button>
            </div>

            <div id="tarefasSection" class="task-section">
                <div class="task-form">
                    <h3 id="formTitle">â• Adicionar Nova Tarefa</h3>
                    <form onsubmit="handleTaskSubmit(event)" id="taskForm">
                        <input type="hidden" id="editTaskId">
                        
                        <div class="input-group">
                            <label for="taskTitle">TÃ­tulo da Tarefa *</label>
                            <input type="text" id="taskTitle" required placeholder="Ex: Comprar mantimentos" class="form-input">
                        </div>
                        
                        <div class="input-group">
                            <label for="taskDescription">DescriÃ§Ã£o</label>
                            <textarea id="taskDescription" placeholder="Detalhes da tarefa (opcional)" class="form-input"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="taskCategory">Categoria</label>
                                <select id="taskCategory" class="form-input">
                                    <option value="">Sem categoria</option>
                                </select>
                            </div>
                            
                            <div class="input-group">
                                <label>&nbsp;</label>
                                <div style="display: flex; gap: 10px;">
                                    <button type="submit" class="btn-primary" style="width: auto; flex: 1;">Salvar ğŸ’¾</button>
                                    <button type="button" class="btn-secondary" onclick="cancelEdit()" id="cancelBtn" style="display: none;">Cancelar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="filters">
                    <button class="filter-btn active" onclick="filterTasks('all')">Todas</button>
                    <button class="filter-btn" onclick="filterTasks('pending')">Pendentes</button>
                    <button class="filter-btn" onclick="filterTasks('completed')">ConcluÃ­das</button>
                    <select id="categoryFilter" onchange="filterByCategory()" class="category-filter-select">
                        <option value="">Todas as Categorias</option>
                    </select>
                </div>

                <div class="task-list" id="taskList"></div>
            </div>

            <div id="categoriasSection" class="task-section hidden">
                <div class="task-form">
                    <h3 id="categoryFormTitle">â• Adicionar Nova Categoria</h3>
                    <form onsubmit="handleCategorySubmit(event)" id="categoryForm">
                        <input type="hidden" id="editCategoryId">
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="categoryName">Nome da Categoria *</label>
                                <input type="text" id="categoryName" required placeholder="Ex: Trabalho" class="form-input">
                            </div>
                            
                            <div class="input-group">
                                <label for="categoryColor">Cor</label>
                                <input type="color" id="categoryColor" value="#667eea" class="form-input">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button type="submit" class="btn-primary" style="flex: 1;">Salvar ğŸ’¾</button>
                            <button type="button" class="btn-secondary" onclick="cancelCategoryEdit()" id="cancelCategoryBtn" style="display: none;">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div id="categoryList"></div>
            </div>
        </div>

        <div class="message" id="message"></div>

        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p>Carregando...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
